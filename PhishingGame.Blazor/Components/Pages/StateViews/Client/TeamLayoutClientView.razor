@using PhishingGame.Blazor.States
@using PhishingGame.Core
@using PhishingGame.Core.Models
@using Radzen
@using Radzen.Blazor
@inherits GameViewBase<TeamLayoutState>

<RadzenStack Orientation="Orientation.Vertical"
             AlignItems="AlignItems.Center">
    <RadzenText TextStyle="TextStyle.H3">@Team.Name</RadzenText>
    <RadzenDataList TItem="Player" Data="@Team.Players">
        <Template Context="player">
            <RadzenText TextStyle="TextStyle.Body1">@player.Name</RadzenText>
        </Template>
    </RadzenDataList>
</RadzenStack>

@code {
    Team Team { get; set; }

    protected override void OnParametersSet()
    {
        Team = GetTeam();
    }

    private Team GetTeam()
    {
        return Session.SessionData.Teams.FirstOrDefault(team => team.Players.Any(player => player.Id == UserId))
            ?? throw new InvalidDataException("Player not found");
    }
}
